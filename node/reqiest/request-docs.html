<!DOCTYPE html>
<html>
<head>
    <title>request info</title>
    <meta name="description" content="Simplified HTTP request client.">
    <meta name="twitter:url" content="https://www.npmjs.com/package/request">
    <meta name="twitter:title" content="npm: request">
    <meta name="twitter:description" content="Simplified HTTP request client.">
    <meta charset="utf-8">
    <meta http-equiv="cleartype" content="on">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="description" content="npm is the package manager for JavaScript.">
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,initial-scale=1,user-scalable=yes">
    <link rel="canonical" href="https://www.npmjs.com/package/request" />
    <!--link type="text/css" rel="stylesheet" media="all" href="/static/css/index.css" /  -->
    <link type="text/css" rel="stylesheet" media="all" href="../auxi/css/npm-index.css" />
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="npm" />
    <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="/static/misc/favicon.ico" />
    <style>
        body, p { font-family: Share, Share-Regular; font-size: 11pt; line-height: 15pt; }
        b, strong { font-family: Share-Bold; font-weight:normal; }
        i, em { font-family: Share-ItalicExp; font-style: italic; }
        code, pre, tt { font-family: Share-TechMono; font-size: 11pt; line-height: 15pt; }
        tt { font-family: Share-TechMono; color: #b93c2f; }
        h1, h2, h3 { font-family: Share-Bold; font-weight: normal; line-height: 0.85em; }
        a, a:visited { text-decoration:none; }
    </style>
</head>

<body class="container">
<div id="readme" class="markdown">
      <h1 class="package-name"><a href="#readme">request</a></h1><p class="package-description">Simplified HTTP request client.</p>
<h1 id="user-content-request-simplified-http-client" class="deep-link package-name-redundant"><a href="#request-simplified-http-client">Request - Simplified HTTP client</a></h1>
<p class="badge-only"><a href="https://nodei.co/npm/request/"><img src="https://nodei.co/npm/request.png?downloads=true&amp;downloadRank=true&amp;stars=true" class="badge" /></a></p>
    <p><a href="https://travis-ci.org/request/request"><img src="https://img.shields.io/travis/request/request.svg?style=flat-square" class="badge" / /></a>
<a href="https://coveralls.io/r/request/request"><img src="https://img.shields.io/coveralls/request/request.svg?style=flat-square" class="badge" / /></a>
<a href="https://gitter.im/request/request?utm_source=badge"><img src="https://img.shields.io/badge/gitter-join_chat-blue.svg?style=flat-square" class="badge" / /></a></p>
<h2 id="user-content-super-simple-to-use" class="deep-link"><a href="#super-simple-to-use">Super simple to use</a></h2>
    <p>Request is designed to be the simplest way possible to make http calls. It supports HTTPS and follows redirects by default.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>request</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>response</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator js"><span>!</span></span><span>error&nbsp;</span><span class="keyword operator js"><span>&amp;</span><span>&amp;</span></span><span>&nbsp;response</span><span class="meta delimiter method period js"><span>.</span></span><span>statusCode&nbsp;</span><span class="keyword operator js"><span>==</span></span><span>&nbsp;</span><span class="constant numeric js"><span>200</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>body</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Show&nbsp;the&nbsp;HTML&nbsp;for&nbsp;the&nbsp;Google&nbsp;homepage.</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h2 id="user-content-table-of-contents" class="deep-link"><a href="#table-of-contents">Table of contents</a></h2>
    <ul>
        <li><a href="#streaming">Streaming</a></li>
        <li><a href="#forms">Forms</a></li>
        <li><a href="#http-authentication">HTTP Authentication</a></li>
        <li><a href="#custom-http-headers">Custom HTTP Headers</a></li>
        <li><a href="#oauth-signing">OAuth Signing</a></li>
        <li><a href="#proxies">Proxies</a></li>
        <li><a href="#unix-domain-sockets">Unix Domain Sockets</a></li>
        <li><a href="#tlsssl-protocol">TLS/SSL Protocol</a></li>
        <li><a href="#support-for-har-12">Support for HAR 1.2</a></li>
        <li><a href="#requestoptions-callback"><strong>All Available Options</strong></a></li>
    </ul>
    <p>Request also offers <a href="#convenience-methods">convenience methods</a> like
<code>request.defaults</code> and <code>request.post</code>, and there are
lots of <a href="#examples">usage examples</a> and several
<a href="#debugging">debugging techniques</a>.</p>


<hr />
<h2 id="streaming" class="deep-link"><a href="#streaming">Streaming</a></h2>
    <p>You can stream any response to a file stream.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://google.com/doodle.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createWriteStream</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>doodle.png</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div></pre></code></pre>
    <p>You can also stream a file to a PUT or POST request. This method will also check the file extension against a mapping of file extensions to content-types (in this case <code>application/json</code>) and use the proper <code>content-type</code> in the PUT request (if the headers don’t already provide one).</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createReadStream</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>file.json</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>put</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/obj.json</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div></pre></code></pre>
    <p>Request can also <code>pipe</code> to itself. When doing so, <code>content-type</code> and <code>content-length</code> are preserved in the PUT headers.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://google.com/img.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>put</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/img.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div></pre></code></pre>
    <p>Request emits a "response" event when a response is received. The <code>response</code> argument will be an instance of <a href="http://nodejs.org/api/http.html#http_http_incomingmessage">http.IncomingMessage</a>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://google.com/img.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>response</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>response</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>response</span><span class="meta delimiter method period js"><span>.</span></span><span>statusCode</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;200</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>response</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>headers</span></span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content-type</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;'image/png'</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>put</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/img.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div></pre></code></pre>
    <p>To easily handle errors when streaming requests, listen to the <code>error</code> event before piping:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/doodle.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>error</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createWriteStream</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>doodle.png</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div></pre></code></pre>
    <p>Now let’s get fancy.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>http</span><span class="meta delimiter method period js"><span>.</span></span><span>createServer</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>req</span></span><span>,&nbsp;</span><span class="variable function js"><span>resp</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>req</span><span class="meta delimiter method period js"><span>.</span></span><span>url&nbsp;</span><span class="keyword operator js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>/doodle.png</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>req</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>method</span></span><span>&nbsp;</span><span class="keyword operator js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>PUT</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;req</span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>put</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/doodle.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>req</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>method</span></span><span>&nbsp;</span><span class="keyword operator js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>GET</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>||</span></span><span>&nbsp;req</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>method</span></span><span>&nbsp;</span><span class="keyword operator js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>HEAD</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/doodle.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>resp</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>You can also <code>pipe()</code> from <code>http.ServerRequest</code> instances, as well as to <code>http.ServerResponse</code> instances. The HTTP method, headers, and entity-body data will be sent. Which means that, if you don't really care about security, you can do:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>http</span><span class="meta delimiter method period js"><span>.</span></span><span>createServer</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>req</span></span><span>,&nbsp;</span><span class="variable function js"><span>resp</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>req</span><span class="meta delimiter method period js"><span>.</span></span><span>url&nbsp;</span><span class="keyword operator js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>/doodle.png</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;x&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/doodle.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;req</span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>x</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;x</span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>resp</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>And since <code>pipe()</code> returns the destination stream in ≥ Node 0.5.x you can do one line proxying. :)</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>req</span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/doodle.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>resp</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>Also, none of this new functionality conflicts with requests previous features, it just expands them.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;r&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>defaults</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>proxy</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://localproxy.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>http</span><span class="meta delimiter method period js"><span>.</span></span><span>createServer</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>req</span></span><span>,&nbsp;</span><span class="variable function js"><span>resp</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>req</span><span class="meta delimiter method period js"><span>.</span></span><span>url&nbsp;</span><span class="keyword operator js"><span>===</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>/doodle.png</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;r</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://google.com/doodle.png</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>pipe</span><span class="meta brace round js"><span>(</span></span><span>resp</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>You can still use intermediate proxies, the requests will still follow HTTP forwards, etc.</p>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="forms" class="deep-link"><a href="#forms">Forms</a></h2>
    <p><code>request</code> supports <code>application/x-www-form-urlencoded</code> and <code>multipart/form-data</code> form uploads. For <code>multipart/related</code> refer to the <code>multipart</code> API.</p>
<h4 id="user-content-applicationx-www-form-urlencoded-url-encoded-forms" class="deep-link"><a href="#applicationx-www-form-urlencoded-url-encoded-forms">application/x-www-form-urlencoded (URL-Encoded Forms)</a></h4>
    <p>URL-encoded forms are simple.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>post</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://service.com/upload</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>form</span><span class="keyword operator js"><span>:</span></span><span class="meta brace curly js"><span>{</span></span><span>key</span><span class="keyword operator js"><span>:</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>value</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;or</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>post</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://service.com/upload</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>form</span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>key</span><span class="keyword operator js"><span>:</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>value</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;or</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>post</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>url</span><span class="keyword operator js"><span>:</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://service.com/upload</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;form</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>key</span><span class="keyword operator js"><span>:</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>value</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,</span><span class="variable function js"><span>httpResponse</span></span><span>,</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="comment block js"><span class="punctuation comment js"><span>/*</span></span><span>&nbsp;...&nbsp;</span><span class="punctuation comment js"><span>*/</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h4 id="user-content-multipartform-data-multipart-form-uploads" class="deep-link"><a href="#multipartform-data-multipart-form-uploads">multipart/form-data (Multipart Form Uploads)</a></h4>
    <p>For <code>multipart/form-data</code> we use the <a href="https://github.com/felixge/node-form-data">form-data</a> library by <a href="https://github.com/felixge">@felixge</a>. For the most cases, you can pass your upload form data via the <code>formData</code> option.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;formData&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Pass&nbsp;a&nbsp;simple&nbsp;key-value&nbsp;pair</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;my_field</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>my_value</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Pass&nbsp;data&nbsp;via&nbsp;Buffers</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;my_buffer</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Buffer</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>1</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric js"><span>2</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric js"><span>3</span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Pass&nbsp;data&nbsp;via&nbsp;Streams</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;my_file</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createReadStream</span><span class="meta brace round js"><span>(</span></span><span class="support variable js"><span>__dirname</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>/unicycle.jpg</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Pass&nbsp;multiple&nbsp;values&nbsp;/w&nbsp;an&nbsp;Array</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;attachments</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createReadStream</span><span class="meta brace round js"><span>(</span></span><span class="support variable js"><span>__dirname</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>/attachment1.jpg</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createReadStream</span><span class="meta brace round js"><span>(</span></span><span class="support variable js"><span>__dirname</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>/attachment2.jpg</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Pass&nbsp;optional&nbsp;meta-data&nbsp;with&nbsp;an&nbsp;'options'&nbsp;object&nbsp;with&nbsp;style:&nbsp;{value:&nbsp;DATA,&nbsp;options:&nbsp;OPTIONS}</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Use&nbsp;case:&nbsp;for&nbsp;some&nbsp;types&nbsp;of&nbsp;streams,&nbsp;you'll&nbsp;need&nbsp;to&nbsp;provide&nbsp;"file"-related&nbsp;information&nbsp;manually.</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;See&nbsp;the&nbsp;`form-data`&nbsp;README&nbsp;for&nbsp;more&nbsp;information&nbsp;about&nbsp;options:&nbsp;</span><span class="markup underline link hyperlink"><span>https://github.com/felixge/node-form-data</span></span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;custom_file</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createReadStream</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>/dev/urandom</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;options</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;filename</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>topsecret.jpg</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contentType</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>image/jpg</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>post</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>url</span><span class="keyword operator js"><span>:</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://service.com/upload</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;formData</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;formData</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>optionalCallback</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>httpResponse</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>err</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.error</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>upload&nbsp;failed:</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;err</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>Upload&nbsp;successful!&nbsp;&nbsp;Server&nbsp;responded&nbsp;with:</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;body</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
    <p>For advanced cases, you can access the form-data object itself via <code>r.form()</code>. This can be modified until the request is fired on the next cycle of the event-loop. (Note that this calling <code>form()</code> will clear the currently set form data for that request.)</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;NOTE:&nbsp;Advanced&nbsp;use-case,&nbsp;for&nbsp;normal&nbsp;use&nbsp;see&nbsp;'formData'&nbsp;usage&nbsp;above</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;r&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>post</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://service.com/upload</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>optionalCallback</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>err</span></span><span>,&nbsp;</span><span class="variable function js"><span>httpResponse</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;form&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;r</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>form</span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>form</span><span class="meta delimiter method period js"><span>.</span></span><span>append</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>my_field</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>my_value</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>form</span><span class="meta delimiter method period js"><span>.</span></span><span>append</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>my_buffer</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Buffer</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>1</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric js"><span>2</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric js"><span>3</span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>form</span><span class="meta delimiter method period js"><span>.</span></span><span>append</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>custom_file</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createReadStream</span><span class="meta brace round js"><span>(</span></span><span class="support variable js"><span>__dirname</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>/unicycle.jpg</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>filename</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>unicycle.jpg</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
    <p>See the <a href="https://github.com/felixge/node-form-data">form-data README</a> for more information &amp; examples.</p>
<h4 id="user-content-multipartrelated" class="deep-link"><a href="#multipartrelated">multipart/related</a></h4>
    <p>Some variations in different HTTP implementations require a newline/CRLF before, after, or both before and after the boundary of a <code>multipart/related</code> request (using the multipart option). This has been observed in the .NET WebAPI version 4.0. You can turn on a boundary preambleCRLF or postamble by passing them as <code>true</code> to your request options.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;method</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>PUT</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;preambleCRLF</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;postambleCRLF</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;uri</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://service.com/upload</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;multipart</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content-type</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>application/json</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;JSON</span><span class="meta delimiter method period js"><span>.</span></span><span>stringify</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>foo</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>bar</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;_attachments</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>message.txt</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>follows</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;length</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>18</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content_type</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>text/plain</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span><span>}</span><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;body</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>I&nbsp;am&nbsp;an&nbsp;attachment</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;body</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>createReadStream</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>image.png</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;alternatively&nbsp;pass&nbsp;an&nbsp;object&nbsp;containing&nbsp;additional&nbsp;options</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;multipart</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chunked</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content-type</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>application/json</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;JSON</span><span class="meta delimiter method period js"><span>.</span></span><span>stringify</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>foo</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>bar</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;_attachments</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>message.txt</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>follows</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;length</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>18</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content_type</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>text/plain</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span><span>}</span><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;body</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>I&nbsp;am&nbsp;an&nbsp;attachment</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>response</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>error</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.error</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>upload&nbsp;failed:</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;error</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>Upload&nbsp;successful!&nbsp;&nbsp;Server&nbsp;responded&nbsp;with:</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;body</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="http-authentication" class="deep-link"><a href="#http-authentication">HTTP Authentication</a></h2>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://some.server.com/</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>auth</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>username</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>password</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;or</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://some.server.com/</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>auth</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>user</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>username</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>pass</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>password</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>sendImmediately</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;or</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://some.server.com/</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>auth</span><span class="meta brace round js"><span>(</span></span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant language null js"><span>null</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>bearerToken</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;or</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://some.server.com/</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>auth</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>bearer</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>bearerToken</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
    <p>If passed as an option, <code>auth</code> should be a hash containing values:</p>
    <ul>
        <li><code>user</code> || <code>username</code></li>
        <li><code>pass</code> || <code>password</code></li>
        <li><code>sendImmediately</code> (optional)</li>
        <li><code>bearer</code> (optional)</li>
    </ul>
    <p>The method form takes parameters
<code>auth(username, password, sendImmediately, bearer)</code>.</p>
    <p><code>sendImmediately</code> defaults to <code>true</code>, which causes a basic or bearer
authentication header to be sent.  If <code>sendImmediately</code> is <code>false</code>, then
<code>request</code> will retry with a proper authentication header after receiving a
<code>401</code> response from the server (which must contain a <code>WWW-Authenticate</code> header
indicating the required authentication method).</p>
    <p>Note that you can also specify basic authentication using the URL itself, as
detailed in <a href="http://www.ietf.org/rfc/rfc1738.txt">RFC 1738</a>.  Simply pass the
<code>user:password</code> before the host with an <code>@</code> sign:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;username&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>username</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;password&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>password</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;url&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>http://</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;username&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>:</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;password&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>@some.server.com</span><span class="punctuation string end js"><span>'</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;url</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>response</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Do&nbsp;more&nbsp;stuff&nbsp;with&nbsp;'body'&nbsp;here</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
    <p>Digest authentication is supported, but it only works with <code>sendImmediately</code>
set to <code>false</code>; otherwise <code>request</code> will send basic authentication on the
initial request, which will probably cause the request to fail.</p>
    <p>Bearer authentication is supported, and is activated when the <code>bearer</code> value is
available. The value may be either a <code>String</code> or a <code>Function</code> returning a
<code>String</code>. Using a function to supply the bearer token is particularly useful if
used in conjuction with <code>defaults</code> to allow a single function to supply the
last known token at the time of sending a request, or to compute one on the fly.</p>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="custom-http-headers" class="deep-link"><a href="#custom-http-headers">Custom HTTP Headers</a></h2>
    <p>HTTP Headers, such as <code>User-Agent</code>, can be set in the <code>options</code> object.
In the example below, we call the github API to find out the number
of stars and forks for the request repository. This requires a
custom <code>User-Agent</code> header as well as https.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>request</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;options&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>https://api.github.com/repos/request/request</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;headers</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>User-Agent</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>request</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>callback</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>response</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator js"><span>!</span></span><span>error&nbsp;</span><span class="keyword operator js"><span>&amp;</span><span>&amp;</span></span><span>&nbsp;response</span><span class="meta delimiter method period js"><span>.</span></span><span>statusCode&nbsp;</span><span class="keyword operator js"><span>==</span></span><span>&nbsp;</span><span class="constant numeric js"><span>200</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;info&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;JSON</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>parse</span></span><span class="meta brace round js"><span>(</span></span><span>body</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>info</span><span class="meta delimiter method period js"><span>.</span></span><span>stargazers_count&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation string begin js"><span>"</span></span><span>&nbsp;Stars</span><span class="punctuation string end js"><span>"</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>info</span><span class="meta delimiter method period js"><span>.</span></span><span>forks_count&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation string begin js"><span>"</span></span><span>&nbsp;Forks</span><span class="punctuation string end js"><span>"</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span>options</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;callback</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="oauth-signing" class="deep-link"><a href="#oauth-signing">OAuth Signing</a></h2>
    <p><a href="https://tools.ietf.org/html/rfc5849">OAuth version 1.0</a> is supported.  The
default signing algorithm is
<a href="https://tools.ietf.org/html/rfc5849#section-3.4.2">HMAC-SHA1</a>:</p>
<pre>
<code class="highlight js">
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;OAuth1.0&nbsp;-&nbsp;3-legged&nbsp;server&nbsp;side&nbsp;flow&nbsp;(Twitter&nbsp;example)</span><span>&nbsp;</span></span></span></div>
<div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;step&nbsp;1</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;qs&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>querystring</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div>
<div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;oauth&nbsp;</span><span class="keyword operator js"><span>=</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;callback</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mysite.com/callback/</span></span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;consumer_key</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;CONSUMER_KEY</span></span></div>
<div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;consumer_secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;CONSUMER_SECRET</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;url&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>https://api.twitter.com/oauth/request_token</span></span><span class="punctuation string end js"><span>'</span></span></span></span></div>
<div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>post</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>url</span><span class="keyword operator js"><span>:</span></span><span>url</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;oauth</span><span class="keyword operator js"><span>:</span></span><span>oauth</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>e</span></span><span>,&nbsp;</span><span class="variable function js"><span>r</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div>
<div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Ideally,&nbsp;you&nbsp;would&nbsp;take&nbsp;the&nbsp;body&nbsp;in&nbsp;the&nbsp;response</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;and&nbsp;construct&nbsp;a&nbsp;URL&nbsp;that&nbsp;a&nbsp;user&nbsp;clicks&nbsp;on&nbsp;(like&nbsp;a&nbsp;sign&nbsp;in&nbsp;button).</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;The&nbsp;verifier&nbsp;is&nbsp;only&nbsp;available&nbsp;in&nbsp;the&nbsp;response&nbsp;after&nbsp;a&nbsp;user&nbsp;has</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;verified&nbsp;with&nbsp;twitter&nbsp;that&nbsp;they&nbsp;are&nbsp;authorizing&nbsp;your&nbsp;app.</span><span>&nbsp;</span></span></span></div>
<div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;step&nbsp;2</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;req_data&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;qs</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>parse</span></span><span class="meta brace round js"><span>(</span></span><span>body</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;uri&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>https://api.twitter.com/oauth/authenticate</span></span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>?</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;qs</span><span class="meta delimiter method period js"><span>.</span></span><span>stringify</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>oauth_token</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;req_data</span><span class="meta delimiter method period js"><span>.</span></span><span>oauth_token</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;redirect&nbsp;the&nbsp;user&nbsp;to&nbsp;the&nbsp;authorize&nbsp;uri</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;step&nbsp;3</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;after&nbsp;the&nbsp;user&nbsp;is&nbsp;redirected&nbsp;back&nbsp;to&nbsp;your&nbsp;server</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;auth_data&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;qs</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>parse</span></span><span class="meta brace round js"><span>(</span></span><span>body</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;oauth&nbsp;</span><span class="keyword operator js"><span>=</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;consumer_key</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;CONSUMER_KEY</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;consumer_secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;CONSUMER_SECRET</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;token</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;auth_data</span><span class="meta delimiter method period js"><span>.</span></span><span>oauth_token</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;token_secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;req_data</span><span class="meta delimiter method period js"><span>.</span></span><span>oauth_token_secret</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;verifier</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;auth_data</span><span class="meta delimiter method period js"><span>.</span></span><span>oauth_verifier</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;url&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>https://api.twitter.com/oauth/access_token</span></span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>post</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>url</span><span class="keyword operator js"><span>:</span></span><span>url</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;oauth</span><span class="keyword operator js"><span>:</span></span><span>oauth</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>e</span></span><span>,&nbsp;</span><span class="variable function js"><span>r</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;ready&nbsp;to&nbsp;make&nbsp;signed&nbsp;requests&nbsp;on&nbsp;behalf&nbsp;of&nbsp;the&nbsp;user</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;perm_data&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;qs</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>parse</span></span><span class="meta brace round js"><span>(</span></span><span>body</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;oauth&nbsp;</span><span class="keyword operator js"><span>=</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;consumer_key</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;CONSUMER_KEY</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;consumer_secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;CONSUMER_SECRET</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;token</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;perm_data</span><span class="meta delimiter method period js"><span>.</span></span><span>oauth_token</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;token_secret</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;perm_data</span><span class="meta delimiter method period js"><span>.</span></span><span>oauth_token_secret</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;url&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>https://api.twitter.com/1.1/users/show.json</span></span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;qs&nbsp;</span><span class="keyword operator js"><span>=</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;screen_name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;perm_data</span><span class="meta delimiter method period js"><span>.</span></span><span>screen_name</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;user_id</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;perm_data</span><span class="meta delimiter method period js"><span>.</span></span><span>user_id</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>url</span><span class="keyword operator js"><span>:</span></span><span>url</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;oauth</span><span class="keyword operator js"><span>:</span></span><span>oauth</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;json</span><span class="keyword operator js"><span>:</span></span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>e</span></span><span>,&nbsp;</span><span class="variable function js"><span>r</span></span><span>,&nbsp;</span><span class="variable function js"><span>user</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>user</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>For <a href="https://tools.ietf.org/html/rfc5849#section-3.4.3">RSA-SHA1 signing</a>, make
the following changes to the OAuth options object:</p>
    <ul>
        <li>Pass <code>signature_method : 'RSA-SHA1'</code></li>
        <li>Instead of <code>consumer_secret</code>, specify a <code>private_key</code> string in
<a href="http://how2ssl.com/articles/working_with_pem_files/">PEM format</a></li>
    </ul>
    <p>For <a href="http://oauth.net/core/1.0/#anchor22">PLAINTEXT signing</a>, make
the following changes to the OAuth options object:</p>
    <ul>
        <li>Pass <code>signature_method : 'PLAINTEXT'</code></li>
    </ul>
    <p>To send OAuth parameters via query params or in a post body as described in The
<a href="http://oauth.net/core/1.0/#consumer_req_param">Consumer Request Parameters</a>
section of the oauth1 spec:</p>
    <ul>
        <li>Pass <code>transport_method : 'query'</code> or <code>transport_method : 'body'</code> in the OAuth
options object.</li>
        <li><code>transport_method</code> defaults to <code>'header'</code></li>
    </ul>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="proxies" class="deep-link"><a href="#proxies">Proxies</a></h2>
    <p>If you specify a <code>proxy</code> option, then the request (and any subsequent
redirects) will be sent via a connection to the proxy server.</p>
    <p>If your endpoint is an <code>https</code> url, and you are using a proxy, then
request will send a <code>CONNECT</code> request to the proxy server <em>first</em>, and
then use the supplied connection to connect to the endpoint.</p>
    <p>That is, first it will make a request like:</p>
<pre><code><pre class="editor editor-colors"><div class="line"><span class="text"><span>HTTP/1.1&nbsp;CONNECT&nbsp;endpoint-server.com:80</span></span></div><div class="line"><span class="text"><span>Host:&nbsp;proxy-server.com</span></span></div><div class="line"><span class="text"><span>User-Agent:&nbsp;whatever&nbsp;user&nbsp;agent&nbsp;you&nbsp;specify</span></span></div></pre></code></pre>
    <p>and then the proxy server make a TCP connection to <code>endpoint-server</code>
on port <code>80</code>, and return a response that looks like:</p>
<pre><code><pre class="editor editor-colors"><div class="line"><span class="text"><span>HTTP/1.1&nbsp;200&nbsp;OK</span></span></div></pre></code></pre>
    <p>At this point, the connection is left open, and the client is
communicating directly with the <code>endpoint-server.com</code> machine.</p>
    <p>See <a href="http://en.wikipedia.org/wiki/HTTP_tunnel">the wikipedia page on HTTP Tunneling</a>
for more information.</p>
    <p>By default, when proxying <code>http</code> traffic, request will simply make a
standard proxied <code>http</code> request.  This is done by making the <code>url</code>
section of the initial line of the request a fully qualified url to
the endpoint.</p>
    <p>For example, it will make a single request that looks like:</p>
<pre><code><pre class="editor editor-colors"><div class="line"><span class="text"><span>HTTP/1.1&nbsp;GET&nbsp;</span><span class="markup underline link hyperlink"><span>http://endpoint-server.com/some-url</span></span></span></div><div class="line"><span class="text"><span>Host:&nbsp;proxy-server.com</span></span></div><div class="line"><span class="text"><span>Other-Headers:&nbsp;all&nbsp;go&nbsp;here</span></span></div><div class="line"><span class="text"><span>&nbsp;</span></span></div><div class="line"><span class="text"><span>request&nbsp;body&nbsp;or&nbsp;whatever</span></span></div></pre></code></pre>
    <p>Because a pure "http over http" tunnel offers no additional security
or other features, it is generally simpler to go with a
straightforward HTTP proxy in this case.  However, if you would like
to force a tunneling proxy, you may set the <code>tunnel</code> option to <code>true</code>.</p>
    <p>You can also make a standard proxied <code>http</code> request by explicitly setting
<code>tunnel : false</code>, but <strong>note that this will allow the proxy to see the traffic
to/from the destination server</strong>.</p>
    <p>If you are using a tunneling proxy, you may set the
<code>proxyHeaderWhiteList</code> to share certain headers with the proxy.</p>
    <p>You can also set the <code>proxyHeaderExclusiveList</code> to share certain
headers only with the proxy and not with destination host.</p>
    <p>By default, this set is:</p>
<pre><code><pre class="editor editor-colors"><div class="line"><span class="text"><span>accept</span></span></div><div class="line"><span class="text"><span>accept-charset</span></span></div><div class="line"><span class="text"><span>accept-encoding</span></span></div><div class="line"><span class="text"><span>accept-language</span></span></div><div class="line"><span class="text"><span>accept-ranges</span></span></div><div class="line"><span class="text"><span>cache-control</span></span></div><div class="line"><span class="text"><span>content-encoding</span></span></div><div class="line"><span class="text"><span>content-language</span></span></div><div class="line"><span class="text"><span>content-length</span></span></div><div class="line"><span class="text"><span>content-location</span></span></div><div class="line"><span class="text"><span>content-md5</span></span></div><div class="line"><span class="text"><span>content-range</span></span></div><div class="line"><span class="text"><span>content-type</span></span></div><div class="line"><span class="text"><span>connection</span></span></div><div class="line"><span class="text"><span>date</span></span></div><div class="line"><span class="text"><span>expect</span></span></div><div class="line"><span class="text"><span>max-forwards</span></span></div><div class="line"><span class="text"><span>pragma</span></span></div><div class="line"><span class="text"><span>proxy-authorization</span></span></div><div class="line"><span class="text"><span>referer</span></span></div><div class="line"><span class="text"><span>te</span></span></div><div class="line"><span class="text"><span>transfer-encoding</span></span></div><div class="line"><span class="text"><span>user-agent</span></span></div><div class="line"><span class="text"><span>via</span></span></div></pre></code></pre>
    <p>Note that, when using a tunneling proxy, the <code>proxy-authorization</code>
header and any headers from custom <code>proxyHeaderExclusiveList</code> are
<em>never</em> sent to the endpoint server, but only to the proxy server.</p>
<h3 id="user-content-controlling-proxy-behaviour-using-environment-variables" class="deep-link"><a href="#controlling-proxy-behaviour-using-environment-variables">Controlling proxy behaviour using environment variables</a></h3>
    <p>The following environment variables are respected by <code>request</code>:</p>
    <ul>
        <li><code>HTTP_PROXY</code> / <code>http_proxy</code></li>
        <li><code>HTTPS_PROXY</code> / <code>https_proxy</code></li>
        <li><code>NO_PROXY</code> / <code>no_proxy</code></li>
    </ul>
    <p>When <code>HTTP_PROXY</code> / <code>http_proxy</code> are set, they will be used to proxy non-SSL requests that do not have an explicit <code>proxy</code> configuration option present. Similarly, <code>HTTPS_PROXY</code> / <code>https_proxy</code> will be respected for SSL requests that do not have an explicit <code>proxy</code> configuration option. It is valid to define a proxy in one of the environment variables, but then override it for a specific request, using the <code>proxy</code> configuration option. Furthermore, the <code>proxy</code> configuration option can be explicitly set to false / null to opt out of proxying altogether for that request.</p>
    <p><code>request</code> is also aware of the <code>NO_PROXY</code>/<code>no_proxy</code> environment variables. These variables provide a granular way to opt out of proxying, on a per-host basis. It should contain a comma separated list of hosts to opt out of proxying. It is also possible to opt of proxying when a particular destination port is used. Finally, the variable may be set to <code>*</code> to opt out of the implicit proxy configuration of the other environment variables.</p>
    <p>Here's some examples of valid <code>no_proxy</code> values:</p>
    <ul>
        <li><code>google.com</code> - don't proxy HTTP/HTTPS requests to Google.</li>
        <li><code>google.com:443</code> - don't proxy HTTPS requests to Google, but <em>do</em> proxy HTTP requests to Google.</li>
        <li><code>google.com:443, yahoo.com:80</code> - don't proxy HTTPS requests to Google, and don't proxy HTTP requests to Yahoo!</li>
        <li><code>*</code> - ignore <code>https_proxy</code>/<code>http_proxy</code> environment variables altogether.</li>
    </ul>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="unix-domain-sockets" class="deep-link"><a href="#unix-domain-sockets">UNIX Domain Sockets</a></h2>
    <p><code>request</code> supports making requests to <a href="http://en.wikipedia.org/wiki/Unix_domain_socket">UNIX Domain Sockets</a>. To make one, use the following URL scheme:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment block js"><span class="punctuation comment js"><span>/*</span></span><span>&nbsp;Pattern&nbsp;</span><span class="punctuation comment js"><span>*/</span></span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://unix:SOCKET:PATH</span></span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span class="comment block js"><span class="punctuation comment js"><span>/*</span></span><span>&nbsp;Example&nbsp;</span><span class="punctuation comment js"><span>*/</span></span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://unix:/absolute/path/to/unix.socket:/request/path</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>Note: The <code>SOCKET</code> path is assumed to be absolute to the root of the host file system.</p>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="tlsssl-protocol" class="deep-link"><a href="#tlsssl-protocol">TLS/SSL Protocol</a></h2>
    <p>TLS/SSL Protocol options, such as <code>cert</code>, <code>key</code> and <code>passphrase</code>, can be
set in the <code>agentOptions</code> property of the <code>options</code> object.
In the example below, we call an API requires client side SSL certificate
(in PEM format) with passphrase protected private key (in PEM format) and disable the SSLv3 protocol:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;fs&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>fs</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;path&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>path</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;certFile&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;path</span><span class="meta delimiter method period js"><span>.</span></span><span>resolve</span><span class="meta brace round js"><span>(</span></span><span class="support variable js"><span>__dirname</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>ssl/client.crt</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;keyFile&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;path</span><span class="meta delimiter method period js"><span>.</span></span><span>resolve</span><span class="meta brace round js"><span>(</span></span><span class="support variable js"><span>__dirname</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>ssl/client.key</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>request</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;options&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>https://api.some-server.com/</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;agentOptions</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cert</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>readFileSync</span><span class="meta brace round js"><span>(</span></span><span>certFile</span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>readFileSync</span><span class="meta brace round js"><span>(</span></span><span>keyFile</span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;Or&nbsp;use&nbsp;`pfx`&nbsp;property&nbsp;replacing&nbsp;`cert`&nbsp;and&nbsp;`key`&nbsp;when&nbsp;using&nbsp;private&nbsp;key,&nbsp;certificate&nbsp;and&nbsp;CA&nbsp;certs&nbsp;in&nbsp;PFX&nbsp;or&nbsp;PKCS12&nbsp;format:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;pfx:&nbsp;fs.readFileSync(pfxFilePath),</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;passphrase</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>password</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;securityOptions</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>SSL_OP_NO_SSLv3</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span>options</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
    <p>It is able to force using SSLv3 only by specifying <code>secureProtocol</code>:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>https://api.some-server.com/</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;agentOptions</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secureProtocol</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>SSLv3_method</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
    <p>It is possible to accept other certificates than those signed by generally allowed Certificate Authorities (CAs).
This can be useful, for example,  when using self-signed certificates.
To allow a different certificate, you can specify the signing CA by adding the contents of the CA's certificate file to the <code>agentOptions</code>:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>https://api.some-server.com/</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;agentOptions</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ca</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;fs</span><span class="meta delimiter method period js"><span>.</span></span><span>readFileSync</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>ca.cert.pem</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre></code></pre>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="support-for-har-12" class="deep-link"><a href="#support-for-har-12">Support for HAR 1.2</a></h2>
    <p>The <code>options.har</code> property will override the values: <code>url</code>, <code>method</code>, <code>qs</code>, <code>headers</code>, <code>form</code>, <code>formData</code>, <code>body</code>, <code>json</code>, as well as construct multipart data and read files from disk when <code>request.postData.params[].fileName</code> is present without a matching <code>value</code>.</p>
    <p>a validation step will check if the HAR Request format matches the latest spec (v1.2) and will skip parsing if not matching.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>request</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;will&nbsp;be&nbsp;ignored</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;method</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>GET</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;uri</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;HTTP&nbsp;Archive&nbsp;Request&nbsp;Object</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;har</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.mockbin.com/har</span></span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>POST</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content-type</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>application/x-www-form-urlencoded</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;postData</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mimeType</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>application/x-www-form-urlencoded</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;params</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>foo</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>bar</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>hello</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>world</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;a&nbsp;POST&nbsp;request&nbsp;will&nbsp;be&nbsp;sent&nbsp;to&nbsp;</span><span class="markup underline link hyperlink"><span>http://www.mockbin.com</span></span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;with&nbsp;body&nbsp;an&nbsp;application/x-www-form-urlencoded&nbsp;body:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;foo=bar&amp;hello=world</span><span>&nbsp;</span></span></span></div></pre></code></pre>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="requestoptions-callback" class="deep-link"><a href="#requestoptions-callback">request(options, callback)</a></h2>
    <p>The first argument can be either a <code>url</code> or an <code>options</code> object. The only required option is <code>uri</code>; all others are optional.</p>
    <ul>
        <li><code>uri</code> || <code>url</code> - fully qualified uri or a parsed url object from <code>url.parse()</code></li>
        <li><code>baseUrl</code> - fully qualified uri string used as the base url. Most useful with <code>request.defaults</code>, for example when you want to do many requests to the same domain.  If <code>baseUrl</code> is <code>https://example.com/api/</code>, then requesting <code>/end/point?test=true</code> will fetch <code>https://example.com/api/end/point?test=true</code>. When <code>baseUrl</code> is given, <code>uri</code> must also be a string.</li>
        <li><code>method</code> - http method (default: <code>"GET"</code>)</li>
        <li><code>headers</code> - http headers (default: <code>{}</code>)</li>
    </ul>


<hr />
    <ul>
        <li><code>qs</code> - object containing querystring values to be appended to the <code>uri</code></li>
        <li><code>qsParseOptions</code> - object containing options to pass to the <a href="https://github.com/hapijs/qs#parsing-objects">qs.parse</a> method or <a href="https://nodejs.org/docs/v0.12.0/api/querystring.html#querystring_querystring_parse_str_sep_eq_options">querystring.parse</a> method</li>
        <li><code>qsStringifyOptions</code> - object containing options to pass to the <a href="https://github.com/hapijs/qs#stringifying">qs.stringify</a> method or to the <a href="https://nodejs.org/docs/v0.12.0/api/querystring.html#querystring_querystring_stringify_obj_sep_eq_options">querystring.stringify</a> method. For example, to change the way arrays are converted to query strings pass the <code>arrayFormat</code> option with one of <code>indices|brackets|repeat</code></li>
        <li><code>useQuerystring</code> - If true, use <code>querystring</code> to stringify and parse
querystrings, otherwise use <code>qs</code> (default: <code>false</code>).  Set this option to
<code>true</code> if you need arrays to be serialized as <code>foo=bar&amp;foo=baz</code> instead of the
default <code>foo[0]=bar&amp;foo[1]=baz</code>.</li>
    </ul>


<hr />
    <ul>
        <li><code>body</code> - entity body for PATCH, POST and PUT requests. Must be a <code>Buffer</code> or <code>String</code>, unless <code>json</code> is <code>true</code>. If <code>json</code> is <code>true</code>, then <code>body</code> must be a JSON-serializable object.</li>
        <li><code>form</code> - when passed an object or a querystring, this sets <code>body</code> to a querystring representation of value, and adds <code>Content-type: application/x-www-form-urlencoded</code> header. When passed no options, a <code>FormData</code> instance is returned (and is piped to request). See "Forms" section above.</li>
        <li><code>formData</code> - Data to pass for a <code>multipart/form-data</code> request. See
<a href="#forms">Forms</a> section above.</li>
        <li><code>multipart</code> - array of objects which contain their own headers and <code>body</code>
attributes. Sends a <code>multipart/related</code> request. See <a href="#forms">Forms</a> section
above.
    <ul>
        <li>Alternatively you can pass in an object <code>{chunked: false, data: []}</code> where
<code>chunked</code> is used to specify whether the request is sent in
<a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding">chunked transfer encoding</a>
In non-chunked requests, data items with body streams are not allowed.</li>
    </ul>
</li>
        <li><code>preambleCRLF</code> - append a newline/CRLF before the boundary of your <code>multipart/form-data</code> request.</li>
        <li><code>postambleCRLF</code> - append a newline/CRLF at the end of the boundary of your <code>multipart/form-data</code> request.</li>
        <li><code>json</code> - sets <code>body</code> but to JSON representation of value and adds <code>Content-type: application/json</code> header.  Additionally, parses the response body as JSON.</li>
        <li><code>jsonReviver</code> - a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse">reviver function</a> that will be passed to <code>JSON.parse()</code> when parsing a JSON response body.</li>
    </ul>


<hr />
    <ul>
        <li><code>auth</code> - A hash containing values <code>user</code> || <code>username</code>, <code>pass</code> || <code>password</code>, and <code>sendImmediately</code> (optional).  See documentation above.</li>
        <li><code>oauth</code> - Options for OAuth HMAC-SHA1 signing. See documentation above.</li>
        <li><code>hawk</code> - Options for <a href="https://github.com/hueniverse/hawk">Hawk signing</a>. The <code>credentials</code> key must contain the necessary signing info, <a href="https://github.com/hueniverse/hawk#usage-example">see hawk docs for details</a>.</li>
        <li><code>aws</code> - <code>object</code> containing AWS signing information. Should have the properties <code>key</code>, <code>secret</code>. Also requires the property <code>bucket</code>, unless you’re specifying your <code>bucket</code> as part of the path, or the request doesn’t use a bucket (i.e. GET Services)</li>
        <li><code>httpSignature</code> - Options for the <a href="https://github.com/joyent/node-http-signature/blob/master/http_signing.md">HTTP Signature Scheme</a> using <a href="https://github.com/joyent/node-http-signature">Joyent's library</a>. The <code>keyId</code> and <code>key</code> properties must be specified. See the docs for other options.</li>
    </ul>


<hr />
    <ul>
        <li><code>followRedirect</code> - follow HTTP 3xx responses as redirects (default: <code>true</code>). This property can also be implemented as function which gets <code>response</code> object as a single argument and should return <code>true</code> if redirects should continue or <code>false</code> otherwise.</li>
        <li><code>followAllRedirects</code> - follow non-GET HTTP 3xx responses as redirects (default: <code>false</code>)</li>
        <li><code>maxRedirects</code> - the maximum number of redirects to follow (default: <code>10</code>)</li>
    </ul>


<hr />
    <ul>
        <li><code>encoding</code> - Encoding to be used on <code>setEncoding</code> of response data. If <code>null</code>, the <code>body</code> is returned as a <code>Buffer</code>. Anything else <strong>(including the default value of <code></code>)</strong> will be passed as the <a href="http://nodejs.org/api/buffer.html#buffer_buffer">encoding</a> parameter to <code>toString()</code> (meaning this is effectively <code>utf8</code> by default).</li>
        <li><code>gzip</code> - If <code>true</code>, add an <code>Accept-Encoding</code> header to request compressed content encodings from the server (if not already present) and decode supported content encodings in the response.  <strong>Note:</strong> Automatic decoding of the response content is performed on the body data returned through <code>request</code> (both through the <code>request</code> stream and passed to the callback function) but is not performed on the <code>response</code> stream (available from the <code>response</code> event) which is the unmodified <code>http.IncomingMessage</code> object which may contain compressed data. See example below.</li>
        <li><code>jar</code> - If <code>true</code> and <code>tough-cookie</code> is installed, remember cookies for future use (or define your custom cookie jar; see examples section)</li>
    </ul>


<hr />
    <ul>
        <li><code>pool</code> - An object describing which agents to use for the request. If this option is omitted the request will use the global agent (as long as <a href="https://github.com/request/request/blob/master/request.js#L747">your options allow for it</a>). Otherwise, request will search the pool for your custom agent. If no custom agent is found, a new agent will be created and added to the pool.
    <ul>
        <li>A <code>maxSockets</code> property can also be provided on the <code>pool</code> object to set the max number of sockets for all agents created (ex: <code>pool: {maxSockets: Infinity}</code>).</li>
        <li>Note that if you are sending multiple requests in a loop and creating
multiple new <code>pool</code> objects, <code>maxSockets</code> will not work as intended.  To
work around this, either use <a href="#requestdefaultsoptions"><code>request.defaults</code></a>
with your pool options or create the pool object with the <code>maxSockets</code>
property outside of the loop.</li>
    </ul>
</li>
        <li><code>timeout</code> - Integer containing the number of milliseconds to wait for a
request to respond before aborting the request.  Note that if the underlying
TCP connection cannot be established, the OS-wide TCP connection timeout will
overrule the <code>timeout</code> option (<a href="http://www.sekuda.com/overriding_the_default_linux_kernel_20_second_tcp_socket_connect_timeout">the default in Linux is around 20 seconds</a>).</li>
        <li><code>localAddress</code> - Local interface to bind for network connections.</li>
        <li><code>proxy</code> - An HTTP proxy to be used. Supports proxy Auth with Basic Auth, identical to support for the <code>url</code> parameter (by embedding the auth info in the <code>uri</code>)</li>
        <li><code>strictSSL</code> - If <code>true</code>, requires SSL certificates be valid. <strong>Note:</strong> to use your own certificate authority, you need to specify an agent that was created with that CA as an option.</li>
        <li><code>agentOptions</code> - Object containing user agent options. See documentation above. <strong>Note:</strong> <a href="http://nodejs.org/api/tls.html#tls_tls_connect_options_callback">see tls API doc for TLS/SSL options</a>.</li>
        <li><code>tunnel</code> - controls the behavior of
<a href="https://en.wikipedia.org/wiki/HTTP_tunnel#HTTP_CONNECT_tunneling">HTTP <code>CONNECT</code> tunneling</a>
as follows:
    <ul>
        <li><code></code> (default) - <code>true</code> if the destination is <code>https</code> or a previous
request in the redirect chain used a tunneling proxy, <code>false</code> otherwise</li>
        <li><code>true</code> - always tunnel to the destination by making a <code>CONNECT</code> request to
the proxy</li>
        <li><code>false</code> - request the destination as a <code>GET</code> request.</li>
    </ul>
</li>
        <li><code>proxyHeaderWhiteList</code> - A whitelist of headers to send to a
tunneling proxy.</li>
        <li><code>proxyHeaderExclusiveList</code> - A whitelist of headers to send
exclusively to a tunneling proxy and not to destination.</li>
        <li><code>removeRefererHeader</code> - removes the referer header when a redirect happens (default: <code>false</code>).</li>
    </ul>


<hr />
    <ul>
        <li><code>time</code> - If <code>true</code>, the request-response cycle (including all redirects) is timed at millisecond resolution, and the result provided on the response's <code>elapsedTime</code> property.</li>
    </ul>


<hr />
    <ul>
        <li><code>har</code> - A <a href="http://www.softwareishard.com/blog/har-12-spec/#request">HAR 1.2 Request Object</a>, will be processed from HAR format into options overwriting matching values <em>(see the <a href="#support-for-har-1.2">HAR 1.2 section</a> for details)</em></li>
    </ul>
    <p>The callback argument gets 3 arguments:</p>
<ol>
        <li>An <code>error</code> when applicable (usually from <a href="http://nodejs.org/api/http.html#http_class_http_clientrequest"><code>http.ClientRequest</code></a> object)</li>
        <li>An <a href="http://nodejs.org/api/http.html#http_http_incomingmessage"><code>http.IncomingMessage</code></a> object</li>
        <li>The third is the <code>response</code> body (<code>String</code> or <code>Buffer</code>, or JSON object if the <code>json</code> option is supplied)</li>
</ol>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="convenience-methods" class="deep-link"><a href="#convenience-methods">Convenience methods</a></h2>
    <p>There are also shorthand methods for different HTTP METHODs and some other conveniences.</p>
<h3 id="user-content-requestdefaultsoptions" class="deep-link"><a href="#requestdefaultsoptions">request.defaults(options)</a></h3>
    <p>This method <strong>returns a wrapper</strong> around the normal request API that defaults
to whatever options you pass to it.</p>
    <p><strong>Note:</strong> <code>request.defaults()</code> <strong>does not</strong> modify the global request API;
instead, it <strong>returns a wrapper</strong> that has your default settings applied to it.</p>
    <p><strong>Note:</strong> You can call <code>.defaults()</code> on the wrapper that is returned from
<code>request.defaults</code> to add/override defaults that were previously defaulted.</p>
    <p>For example:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>requests&nbsp;using&nbsp;baseRequest()&nbsp;will&nbsp;set&nbsp;the&nbsp;'x-token'&nbsp;header</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;baseRequest&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>defaults</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;headers</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>x</span><span class="keyword operator js"><span>-</span></span><span>token</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>my-token</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>requests&nbsp;using&nbsp;specialRequest()&nbsp;will&nbsp;include&nbsp;the&nbsp;'x-token'&nbsp;header&nbsp;set&nbsp;in</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>baseRequest&nbsp;and&nbsp;will&nbsp;also&nbsp;include&nbsp;the&nbsp;'special'&nbsp;header</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;specialRequest&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;baseRequest</span><span class="meta delimiter method period js"><span>.</span></span><span>defaults</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;headers</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>special</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>special&nbsp;value</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h3 id="user-content-requestput" class="deep-link"><a href="#requestput">request.put</a></h3>
    <p>Same as <code>request()</code>, but defaults to <code>method: "PUT"</code>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>put</span><span class="meta brace round js"><span>(</span></span><span>url</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h3 id="user-content-requestpatch" class="deep-link"><a href="#requestpatch">request.patch</a></h3>
    <p>Same as <code>request()</code>, but defaults to <code>method: "PATCH"</code>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>patch</span><span class="meta brace round js"><span>(</span></span><span>url</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h3 id="user-content-requestpost" class="deep-link"><a href="#requestpost">request.post</a></h3>
    <p>Same as <code>request()</code>, but defaults to <code>method: "POST"</code>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>post</span><span class="meta brace round js"><span>(</span></span><span>url</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h3 id="user-content-requesthead" class="deep-link"><a href="#requesthead">request.head</a></h3>
    <p>Same as <code>request()</code>, but defaults to <code>method: "HEAD"</code>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>head</span><span class="meta brace round js"><span>(</span></span><span>url</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h3 id="user-content-requestdel" class="deep-link"><a href="#requestdel">request.del</a></h3>
    <p>Same as <code>request()</code>, but defaults to <code>method: "DELETE"</code>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>del</span><span class="meta brace round js"><span>(</span></span><span>url</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h3 id="user-content-requestget" class="deep-link"><a href="#requestget">request.get</a></h3>
    <p>Same as <code>request()</code> (for uniformity).</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span>url</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h3 id="user-content-requestcookie" class="deep-link"><a href="#requestcookie">request.cookie</a></h3>
    <p>Function that creates a new cookie.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>cookie</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>key1=value1</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
<h3 id="user-content-requestjar" class="deep-link"><a href="#requestjar">request.jar()</a></h3>
    <p>Function that creates a new cookie jar.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>request</span><span class="meta delimiter method period js"><span>.</span></span><span>jar</span><span class="meta brace round js"><span>(</span><span>)</span></span></span></div></pre></code></pre>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="debugging" class="deep-link"><a href="#debugging">Debugging</a></h2>
    <p>There are at least three ways to debug the operation of <code>request</code>:</p>
<ol>
        <li>
    <p>Launch the node process like <code>NODE_DEBUG=request node script.js</code>
(<code>lib,request,otherlib</code> works too).</p>
</li>
        <li>
    <p>Set <code>require('request').debug = true</code> at any time (this does the same thing
as #1).</p>
</li>
        <li>
    <p>Use the <a href="https://github.com/nylen/request-debug">request-debug module</a> to
view request and response headers and bodies.</p>
</li>
</ol>
    <p><a href="#table-of-contents">back to top</a></p>


<hr />
<h2 id="examples" class="deep-link"><a href="#examples">Examples:</a></h2>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>request</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;rand&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>Math</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>floor</span></span><span class="meta brace round js"><span>(</span></span><span class="support class js"><span>Math</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>random</span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="keyword operator js"><span>*</span></span><span class="constant numeric js"><span>100000000</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>toString</span></span><span class="meta brace round js"><span>(</span><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta brace round js"><span>(</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;method</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>PUT</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;uri</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://mikeal.iriscouch.com/testjs/</span></span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;rand</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;multipart</span><span class="keyword operator js"><span>:</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>[</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content-type</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>application/json</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;&nbsp;body</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;JSON</span><span class="meta delimiter method period js"><span>.</span></span><span>stringify</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>foo</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>bar</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;_attachments</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>message.txt</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>follows</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;length</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>18</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content_type</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>text/plain</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span><span>}</span><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;body</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>I&nbsp;am&nbsp;an&nbsp;attachment</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace square js"><span>]</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>response</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>response</span><span class="meta delimiter method period js"><span>.</span></span><span>statusCode&nbsp;</span><span class="keyword operator js"><span>==</span></span><span>&nbsp;</span><span class="constant numeric js"><span>201</span></span><span class="meta brace round js"><span>)</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>document&nbsp;saved&nbsp;as:&nbsp;</span><span class="markup underline link hyperlink"><span>http://mikeal.iriscouch.com/testjs/</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>+</span></span><span>&nbsp;rand</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>error:&nbsp;</span><span class="punctuation string end js"><span>'</span></span></span><span class="keyword operator js"><span>+</span></span><span>&nbsp;response</span><span class="meta delimiter method period js"><span>.</span></span><span>statusCode</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span>body</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>For backwards-compatibility, response compression is not supported by default.
To accept gzip-compressed responses, set the <code>gzip</code> option to <code>true</code>.  Note
that the body data passed through <code>request</code> is automatically decompressed
while the response object is unmodified and will contain compressed data if
the server sent a compressed response.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>request</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta brace round js"><span>(</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;method</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>GET</span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;uri</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;gzip</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>error</span></span><span>,&nbsp;</span><span class="variable function js"><span>response</span></span><span>,&nbsp;</span><span class="variable function js"><span>body</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;body&nbsp;is&nbsp;the&nbsp;decompressed&nbsp;response&nbsp;body</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>server&nbsp;encoded&nbsp;the&nbsp;data&nbsp;as:&nbsp;</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>response</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>headers</span></span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>content-encoding</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator js"><span>||</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>identity</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>the&nbsp;decoded&nbsp;data&nbsp;is:&nbsp;</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;body</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>data</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>data</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;decompressed&nbsp;data&nbsp;as&nbsp;it&nbsp;is&nbsp;received</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>decoded&nbsp;chunk:&nbsp;</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;data</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>response</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>response</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;unmodified&nbsp;http.IncomingMessage&nbsp;object</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;response</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>data</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation begin js"><span>(</span></span><span class="variable function js"><span>data</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;compressed&nbsp;data&nbsp;as&nbsp;it&nbsp;is&nbsp;received</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js firebug"><span>console</span></span><span class="support function js firebug"><span>.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>received&nbsp;</span><span class="punctuation string end js"><span>'</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;data</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>length</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>&nbsp;bytes&nbsp;of&nbsp;compressed&nbsp;data</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>Cookies are disabled by default (else, they would be used in subsequent requests). To enable cookies, set <code>jar</code> to <code>true</code> (either in <code>defaults</code> or <code>options</code>) and install <code>tough-cookie</code>.</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>defaults</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>jar</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://images.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>To use a custom cookie jar (instead of <code>request</code>’s global cookie jar), set <code>jar</code> to an instance of <code>request.jar()</code> (either in <code>defaults</code> or <code>options</code>)</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;j&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>jar</span><span class="meta brace round js"><span>(</span><span>)</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>defaults</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>jar</span><span class="keyword operator js"><span>:</span></span><span>j</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://images.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>OR</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;j&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>jar</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;cookie&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>cookie</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>key1=value1</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;url&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>j</span><span class="meta delimiter method period js"><span>.</span></span><span>setCookie</span><span class="meta brace round js"><span>(</span></span><span>cookie</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;url</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;url</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;jar</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;j</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://images.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>To use a custom cookie store (such as a
<a href="https://github.com/mitsuru/tough-cookie-filestore"><code>FileCookieStore</code></a>
which supports saving to and restoring from JSON files), pass it as a parameter
to <code>request.jar()</code>:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;FileCookieStore&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support function js"><span>require</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>tough-cookie-filestore</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;NOTE&nbsp;-&nbsp;currently&nbsp;the&nbsp;'cookies.json'&nbsp;file&nbsp;must&nbsp;already&nbsp;exist!</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;j&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>jar</span><span class="meta brace round js"><span>(</span></span><span class="meta class instance constructor"><span class="keyword operator js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>FileCookieStore</span></span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span>cookies.json</span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>request&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>defaults</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;jar&nbsp;</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;j&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation begin js"><span>(</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;request</span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://images.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p>The cookie store must be a
<a href="https://github.com/goinstant/tough-cookie"><code>tough-cookie</code></a>
store and it must support synchronous operations; see the
<a href="https://github.com/goinstant/tough-cookie/#cookiestore-api"><code>CookieStore</code> API docs</a>
for details.</p>
    <p>To inspect your cookie jar after a request:</p>
<pre><code class="highlight js"><pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;j&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;request</span><span class="meta delimiter method period js"><span>.</span></span><span>jar</span><span class="meta brace round js"><span>(</span><span>)</span></span></span></div><div class="line"><span class="source js"><span>request</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation string begin js"><span>'</span></span><span class="markup underline link hyperlink"><span>http://www.google.com</span></span><span class="punctuation string end js"><span>'</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;jar</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;j</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="punctuation begin js"><span>(</span></span><span class="punctuation end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;cookie_string&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;j</span><span class="meta delimiter method period js"><span>.</span></span><span>getCookieString</span><span class="meta brace round js"><span>(</span></span><span>uri</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;"key1=value1;&nbsp;key2=value2;&nbsp;..."</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;cookies&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;j</span><span class="meta delimiter method period js"><span>.</span></span><span>getCookies</span><span class="meta brace round js"><span>(</span></span><span>uri</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation comment js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation comment js"><span>//</span></span><span>&nbsp;[{key:&nbsp;'key1',&nbsp;value:&nbsp;'value1',&nbsp;domain:&nbsp;"www.google.com",&nbsp;...},&nbsp;...]</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span></span></div></pre></code></pre>
    <p><a href="#table-of-contents">back to top</a></p>

  </div>
</body>
</html>
